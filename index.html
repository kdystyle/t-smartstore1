<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°±ë§ˆì¥ëŒ€ë¦¬ì  - (ì£¼)ì—°í•©ì •ë³´í†µì‹ </title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#E60012', 
                        primaryDark: '#B9000E',
                        secondary: '#1F2937', 
                        accent: '#F59E0B',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 antialiased selection:bg-red-100 selection:text-red-900">

    <!-- App Container -->
    <div id="app">
        <!-- Content will be rendered here by JS -->
    </div>

    <!-- Data & Logic -->
    <script>
        // --- 1. CMS Database (Simulated Backend) ---
        const defaultData = {
            settings: {
                heroTitle: "ë¯¿ì„ ìˆ˜ ìˆëŠ”\nSKT ë°±ë§ˆì¥ëŒ€ë¦¬ì  í˜œíƒ",
                heroSubtitle: "ì¸ì²œ No.1 SKí…”ë ˆì½¤ ê³µì‹ì¸ì¦ëŒ€ë¦¬ì \nìµœì‹  ìŠ¤ë§ˆíŠ¸í°ë¶€í„° ì•Œëœ° ìš”ê¸ˆì œê¹Œì§€, ì „ë¬¸ê°€ì™€ ìƒë‹´í•˜ì„¸ìš”.",
                notice: "SKT ë°±ë§ˆì¥ ëŒ€ë¦¬ì  ê³µì‹ ì˜¨ë¼ì¸ ìŠ¤í† ì–´",
                contactPhone: "070-7996-2040",
                inquiryPhone: "1600-7816",
                heroImage: "https://github.com/kdystyle/t-smartstore1/blob/main/skt1.jpg?raw=true",
                adminMobile: "010-0000-0000",
                adminPassword: "1234" // Default Admin Password
            },
            // ... (products, plans, etc. remain same) ...
            products: [
                { id: 1, type: 'new', name: "ì‚¼ì„± ê°¤ëŸ­ì‹œ S24 Ultra", price: 1590000, img: "https://github.com/kdystyle/t-smartstore1/blob/main/s24.jpg?raw=true", badge: "BEST", sale: 5 },
                { id: 2, type: 'new', name: "ì•„ì´í° 15 Pro 256GB", price: 1550000, img: "https://github.com/kdystyle/t-smartstore1/blob/main/iphone15.jpg?raw=true", badge: "NEW", sale: 0 },
                { id: 3, type: 'new', name: "ê°¤ëŸ­ì‹œ Z í”Œë¦½5", price: 1150000, img: "https://github.com/kdystyle/t-smartstore1/blob/main/gz5.jpg?raw=true", badge: "íŠ¹ê°€", sale: 15 },
                { id: 4, type: 'new', name: "ê°¤ëŸ­ì‹œ A25 5G", price: 449000, img: "https://github.com/kdystyle/t-smartstore1/raw/34d889235042e5959bd217b357f22366260de1cc/ga25.jpg", badge: "íš¨ë„í°", sale: 0 },
                { id: 5, type: 'used', name: "[Sê¸‰] ì•„ì´í° 13 ë¯¸ë‹ˆ", price: 550000, img: "https://github.com/kdystyle/t-smartstore1/blob/main/iphone13.jpg?raw=true", badge: "ê²€ìˆ˜ì™„ë£Œ", sale: 0 },
                { id: 6, type: 'used', name: "[Aê¸‰] ê°¤ëŸ­ì‹œ S22", price: 380000, img: "https://github.com/kdystyle/t-smartstore1/blob/main/gs22.jpg?raw=true", badge: "íŠ¹ê°€", sale: 0 },
                { id: 7, type: 'used', name: "[Sê¸‰] ì•„ì´í° 12 Pro", price: 620000, img: "https://github.com/kdystyle/t-smartstore1/blob/main/iphone12pro.jpg?raw=true", badge: "ë°°í„°ë¦¬100", sale: 0 },
                { id: 8, type: 'used', name: "[Bê¸‰] ê°¤ëŸ­ì‹œ A34", price: 150000, img: "https://github.com/kdystyle/t-smartstore1/blob/main/ga34.jpg?raw=true", badge: "ê°€ì„±ë¹„", sale: 0 },
            ],
            plans: [
                { id: 101, carrier: "SKT", title: "5G ë² ì´ì§", data: "8GB", call: "ë¬´ì œí•œ", price: 49000, highlight: false },
                { id: 102, carrier: "SKT", title: "5G í”„ë¼ì„", data: "ë¬´ì œí•œ", call: "ë¬´ì œí•œ", price: 89000, highlight: true },
                { id: 103, carrier: "ì•Œëœ°í°", title: "ë°ì´í„° ë§˜ê» 15GB+", data: "15GB+3Mbps", call: "100ë¶„", price: 27500, highlight: false },
            ],
            reviews: [
                { id: 1, user: "ê¹€*ìˆ˜", text: "ìƒë‹´ì´ ì •ë§ ì¹œì ˆí•˜ê³  ë°°ì†¡ë„ ë¹¨ëìŠµë‹ˆë‹¤.", rating: 5 },
                { id: 2, user: "ì´*ì˜", text: "Sê¸‰ ì¤‘ê³ í° ìƒ€ëŠ”ë° ìƒˆê±°ì¸ ì¤„ ì•Œì•˜ì–´ìš”.", rating: 5 },
                { id: 3, user: "ë°•*í˜¸", text: "ìš”ê¸ˆì œ ì»¨ì„¤íŒ… ë•ë¶„ì— í†µì‹ ë¹„ ë§ì´ ì¤„ì˜€ìŠµë‹ˆë‹¤.", rating: 4 },
            ],
            faqs: [
                { q: "ê°œí†µì€ ì–´ë–»ê²Œ ì§„í–‰ë˜ë‚˜ìš”?", a: "ì‹ ì²­ì„œë¥¼ ì‘ì„±í•´ì£¼ì‹œë©´ í•´í”¼ì½œì„ í†µí•´ ê°œí†µ ì ˆì°¨ë¥¼ ì•ˆë‚´í•´ë“œë¦½ë‹ˆë‹¤." },
                { q: "ì¤‘ê³ í° ë³´ì¦ ê¸°ê°„ì€?", a: "êµ¬ë§¤ í›„ 14ì¼ ì´ë‚´ ê¸°ëŠ¥ ì´ìƒ ì‹œ êµí™˜/í™˜ë¶ˆ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
            ]
        };

        // Initialize State with Persistence (Improved Logic)
        // ê¸°ì¡´ ë°ì´í„°ê°€ ìˆì–´ë„ ìƒˆë¡œìš´ ì„¤ì •(adminMobile ë“±)ì´ ëˆ„ë½ë˜ì§€ ì•Šë„ë¡ ë³‘í•©í•©ë‹ˆë‹¤.
        let savedStore = JSON.parse(localStorage.getItem('baekmajang_db'));
        let store = savedStore ? { 
            ...defaultData, 
            ...savedStore, 
            settings: { ...defaultData.settings, ...savedStore.settings } 
        } : defaultData;
        
        function saveStore() {
            localStorage.setItem('baekmajang_db', JSON.stringify(store));
            render();
        }

        function resetStore() {
            localStorage.removeItem('baekmajang_db');
            store = defaultData;
            location.reload();
        }

        // --- 2. State Management (Router & User) ---
        let state = {
            view: 'home', // home, admin
            cart: [],
            selectedPlan: null, // New: To track selected plan for inquiry
            modals: { login: false, signup: false, terms: false, privacy: false, consultation: false },
            isAdmin: false
        };

        // --- 3. Component Rendering Engine ---
        
        function formatPrice(price) {
            return new Intl.NumberFormat('ko-KR').format(price) + 'ì›';
        }

        // Header Component
        function Header() {
            return `
                <header class="sticky top-0 z-50 glass-effect border-b border-gray-100 transition-all duration-300">
                    <div class="bg-gray-900 text-white text-xs text-center py-2 px-4 flex justify-between items-center md:justify-center relative">
                        <span class="truncate">${store.settings.notice}</span>
                        ${state.isAdmin ? '<span class="bg-red-600 text-white text-[10px] px-2 py-0.5 rounded ml-2">ê´€ë¦¬ì ëª¨ë“œ</span>' : ''}
                    </div>
                    <div class="container mx-auto px-4 h-16 flex items-center justify-between">
                        <a href="#" onclick="navigate('home')" class="text-xl md:text-2xl font-black text-gray-900 tracking-tighter flex items-center gap-1">
                            <span class="text-primary">SKT</span> ë°±ë§ˆì¥ëŒ€ë¦¬ì 
                        </a>
                        
                        <!-- Search Bar Removed -->
                        <div class="hidden md:flex flex-1 mx-12"></div>

                        <div class="flex items-center gap-5">
                            <!-- Mobile Search Icon Removed -->
                            <button onclick="toggleCart()" class="relative text-gray-600 hover:text-primary transition">
                                <i data-lucide="shopping-bag" class="w-6 h-6"></i>
                                <span class="${state.cart.length > 0 ? 'scale-100' : 'scale-0'} absolute -top-1 -right-1 bg-primary text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full transition-transform duration-200 font-bold">${state.cart.length}</span>
                            </button>
                            <!-- User Icon Removed -->
                        </div>
                    </div>
                </header>
            `;
        }

        // Hero Section
        function Hero() {
            return `
                <section class="relative bg-gradient-to-br from-gray-900 via-gray-800 to-red-900 text-white overflow-hidden">
                    <div class="container mx-auto px-4 py-16 md:py-24 flex flex-col md:flex-row items-center justify-between relative z-10">
                        <div class="md:w-1/2 space-y-6 text-center md:text-left">
                            <span class="inline-block bg-primary/20 border border-primary/50 text-primary-300 text-xs font-bold px-3 py-1 rounded-full backdrop-blur-sm mb-2">ê³µì‹ ì¸ì¦ ëŒ€ë¦¬ì </span>
                            <h1 class="text-4xl md:text-6xl font-black leading-tight whitespace-pre-line">${store.settings.heroTitle}</h1>
                            <p class="text-gray-300 text-lg md:text-xl font-light whitespace-pre-line">${store.settings.heroSubtitle}</p>
                            <div class="pt-6 flex flex-col md:flex-row gap-3 justify-center md:justify-start">
                                <a href="#new-phones" class="bg-primary hover:bg-primaryDark text-white px-8 py-4 rounded-xl font-bold transition shadow-lg shadow-red-600/30 flex items-center justify-center gap-2">
                                    íŠ¹ê°€ ìƒí’ˆ ë³´ê¸° <i data-lucide="arrow-right" class="w-4 h-4"></i>
                                </a>
                                <a href="#plans" class="bg-white/10 hover:bg-white/20 backdrop-blur border border-white/10 text-white px-8 py-4 rounded-xl font-bold transition flex items-center justify-center">
                                    ìš”ê¸ˆì œ ë¹„êµ
                                </a>
                            </div>
                        </div>
                        <div class="md:w-1/2 mt-12 md:mt-0 relative flex justify-center">
                            <div class="w-72 h-72 bg-primary blur-[120px] rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-40 animate-pulse"></div>
                            <!-- Added onerror fallback -->
                            <img src="${store.settings.heroImage}" onerror="this.src='https://placehold.co/800x600/1a1a1a/FFF?text=Store+Image+Not+Found'" alt="Store" class="relative z-10 rounded-2xl shadow-2xl border border-white/10 transform rotate-1 hover:rotate-0 transition duration-700 w-full max-w-lg object-cover">
                        </div>
                    </div>
                    <!-- Pattern -->
                    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
                </section>
            `;
        }

        // Category Nav
        function CategoryNav() {
            const items = [
                { icon: 'smartphone', label: 'ìµœì‹ í°', href: '#new-phones' },
                { icon: 'recycle', label: 'ì¤‘ê³ í°', href: '#used-phones' },
                { icon: 'signal', label: 'ìš”ê¸ˆì œ', href: '#plans' },
                // Changed href to void(0) and added onclick for non-functioning links
                { icon: 'box-select', label: 'ì˜¤í”ˆë°•ìŠ¤', href: 'javascript:void(0)', onclick: "showToast('ì˜¤í”ˆë°•ìŠ¤ ë©”ë‰´ëŠ” ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.')" },
                { icon: 'headphones', label: 'ì•¡ì„¸ì„œë¦¬', href: 'javascript:void(0)', onclick: "showToast('ì•¡ì„¸ì„œë¦¬ ë©”ë‰´ëŠ” ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.')" }
            ];
            return `
                <nav class="sticky top-16 z-40 bg-white/95 backdrop-blur border-b border-gray-100">
                    <div class="container mx-auto px-4">
                        <ul class="flex justify-between md:justify-start md:gap-12 overflow-x-auto hide-scrollbar py-4">
                            ${items.map(item => `
                                <li class="min-w-[70px] text-center flex-shrink-0">
                                    <a href="${item.href}" ${item.onclick ? `onclick="${item.onclick}"` : ''} class="group flex flex-col items-center gap-2 cursor-pointer">
                                        <div class="w-12 h-12 bg-gray-50 rounded-2xl flex items-center justify-center group-hover:bg-primary group-hover:text-white transition-colors duration-300 shadow-sm">
                                            <i data-lucide="${item.icon}" class="w-6 h-6"></i>
                                        </div>
                                        <span class="text-xs font-medium text-gray-600 group-hover:text-gray-900">${item.label}</span>
                                    </a>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </nav>
            `;
        }

        // Product Section
        function ProductSection(type) {
            const title = type === 'new' ? "ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ëª¨ë¸" : "âœ¨ ìƒˆê²ƒ ê°™ì€ Sê¸‰ ì¤‘ê³ í°";
            const products = store.products.filter(p => p.type === type);
            const id = type === 'new' ? "new-phones" : "used-phones";

            return `
                <section id="${id}" class="py-12 md:py-16">
                    <div class="container mx-auto px-4">
                        <div class="flex items-end justify-between mb-8">
                            <div>
                                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">${title}</h2>
                                <p class="text-sm text-gray-500">${type === 'new' ? 'ì§€ê¸ˆ ê°€ì¥ ë§ì´ ì°¾ëŠ” ìµœì‹  ìŠ¤ë§ˆíŠ¸í°' : 'ì „ë¬¸ê°€ê°€ ì—„ê²©í•˜ê²Œ ê²€ìˆ˜í•œ ì¸ì¦ ì¤‘ê³ í°'}</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8">
                            ${products.map(product => `
                                <div class="group bg-white rounded-2xl overflow-hidden border border-gray-100 hover:shadow-xl hover:border-primary/20 transition-all duration-300 relative">
                                    <div class="aspect-square bg-gray-50 relative overflow-hidden">
                                        <!-- Added onerror fallback -->
                                        <img src="${product.img}" onerror="this.src='https://placehold.co/400?text=No+Image'" class="w-full h-full object-cover transform group-hover:scale-105 transition duration-500" alt="${product.name}" loading="lazy">
                                        ${product.badge ? `<span class="absolute top-3 left-3 bg-gray-900 text-white text-[10px] font-bold px-2.5 py-1 rounded">${product.badge}</span>` : ''}
                                        ${product.sale > 0 ? `<span class="absolute top-3 right-3 bg-red-600 text-white text-[10px] font-bold px-2 py-1 rounded-full">-${product.sale}%</span>` : ''}
                                        <button onclick="addToCart(${product.id})" class="absolute bottom-3 right-3 bg-white text-gray-900 w-10 h-10 rounded-full shadow-lg flex items-center justify-center opacity-0 translate-y-4 group-hover:opacity-100 group-hover:translate-y-0 transition duration-300 hover:bg-primary hover:text-white">
                                            <i data-lucide="shopping-cart" class="w-5 h-5"></i>
                                        </button>
                                    </div>
                                    <div class="p-5">
                                        <h3 class="font-bold text-gray-900 mb-1 truncate">${product.name}</h3>
                                        <div class="flex items-center gap-2">
                                            <span class="text-lg font-black text-primary">${formatPrice(product.price)}</span>
                                            ${product.sale > 0 ? `<span class="text-xs text-gray-400 line-through">${formatPrice(Math.round(product.price * (1 + product.sale/100)))}</span>` : ''}
                                        </div>
                                        <div class="mt-3 flex gap-1 flex-wrap">
                                            <span class="text-[10px] bg-gray-100 text-gray-600 px-2 py-1 rounded">ë¬´ë£Œë°°ì†¡</span>
                                            <span class="text-[10px] bg-gray-100 text-gray-600 px-2 py-1 rounded">ì‚¬ì€í’ˆ</span>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </section>
            `;
        }

        // Plans Section
        function PlansSection() {
            return `
                <section id="plans" class="py-16 bg-gray-50">
                    <div class="container mx-auto px-4">
                        <div class="bg-gray-900 rounded-3xl p-8 md:p-12 text-white relative overflow-hidden shadow-2xl">
                            <div class="relative z-10 mb-8 md:mb-12 text-center md:text-left">
                                <h2 class="text-3xl font-bold mb-3">ë°±ë§ˆì¥ëŒ€ë¦¬ì  ì¶”ì²œ ìš”ê¸ˆì œ</h2>
                                <p class="text-gray-300">ë°ì´í„° ë¬´ì œí•œë¶€í„° ì´ˆì €ê°€ ì‹¤ì†í˜•ê¹Œì§€, ë‚˜ì—ê²Œ ë”± ë§ëŠ” ìš”ê¸ˆì œë¥¼ ì°¾ì•„ë³´ì„¸ìš”.</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 relative z-10">
                                ${store.plans.map(plan => `
                                    <div class="bg-white rounded-2xl p-6 text-gray-900 relative group hover:-translate-y-1 transition duration-300 ${plan.highlight ? 'ring-4 ring-primary/30' : ''}">
                                        ${plan.highlight ? '<div class="absolute top-0 right-0 bg-primary text-white text-xs font-bold px-3 py-1.5 rounded-bl-xl rounded-tr-xl">ê°•ë ¥ì¶”ì²œ</div>' : ''}
                                        <div class="text-xs font-bold text-gray-500 mb-2">${plan.carrier}</div>
                                        <h3 class="text-xl font-bold mb-4">${plan.title}</h3>
                                        <div class="space-y-3 mb-6">
                                            <div class="flex items-center gap-3 text-sm">
                                                <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-primary"><i data-lucide="wifi" class="w-4 h-4"></i></div>
                                                <div>ë°ì´í„° <span class="font-bold block text-base">${plan.data}</span></div>
                                            </div>
                                            <div class="flex items-center gap-3 text-sm">
                                                <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-primary"><i data-lucide="phone" class="w-4 h-4"></i></div>
                                                <div>ìŒì„± <span class="font-bold block text-base">${plan.call}</span></div>
                                            </div>
                                        </div>
                                        <div class="border-t border-gray-100 pt-4 flex items-center justify-between">
                                            <span class="text-2xl font-black text-primary">${formatPrice(plan.price)}<span class="text-sm font-normal text-gray-400">/ì›”</span></span>
                                            <button onclick="inquiryPlan('${plan.title}')" class="bg-gray-900 text-white text-sm px-4 py-2 rounded-lg hover:bg-black transition">ìƒë‹´ì‹ ì²­</button>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-primary rounded-full opacity-20 blur-[100px] pointer-events-none translate-x-1/2 -translate-y-1/2"></div>
                        </div>
                    </div>
                </section>
            `;
        }

        // Trust Section (Reviews & FAQ)
        function TrustSection() {
            return `
                <section class="py-16">
                    <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-12">
                        <!-- Reviews -->
                        <div>
                            <h3 class="text-2xl font-bold mb-6 flex items-center gap-2"><i data-lucide="star" class="text-accent fill-accent"></i> ê³ ê° ë¦¬ì–¼ í›„ê¸°</h3>
                            <div class="space-y-4">
                                ${store.reviews.map(review => `
                                    <div class="bg-white p-5 rounded-xl border border-gray-100 shadow-sm">
                                        <div class="flex justify-between items-start mb-2">
                                            <span class="font-bold text-gray-900">${review.user}ë‹˜</span>
                                            <div class="flex text-accent text-xs">
                                                ${'â˜…'.repeat(review.rating)}${'â˜†'.repeat(5-review.rating)}
                                            </div>
                                        </div>
                                        <p class="text-sm text-gray-600 line-clamp-2">"${review.text}"</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <!-- FAQ -->
                        <div>
                            <h3 class="text-2xl font-bold mb-6 flex items-center gap-2"><i data-lucide="help-circle" class="text-primary"></i> ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
                            <div class="space-y-3">
                                ${store.faqs.map(faq => `
                                    <div class="bg-gray-50 rounded-xl p-5 cursor-pointer hover:bg-gray-100 transition group">
                                        <h4 class="font-bold text-gray-900 text-sm mb-2 flex items-center justify-between">
                                            Q. ${faq.q}
                                            <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400 group-hover:text-primary"></i>
                                        </h4>
                                        <p class="text-sm text-gray-600 pl-4 border-l-2 border-primary/20">A. ${faq.a}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        // Footer
        function Footer() {
            return `
                <footer class="bg-gray-900 text-gray-400 py-16 border-t border-gray-800 text-sm">
                    <div class="container mx-auto px-4">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-10 mb-12">
                            <div>
                                <h3 class="text-white text-lg font-bold mb-6 flex items-center gap-2">
                                    SKT ë°±ë§ˆì¥ëŒ€ë¦¬ì 
                                </h3>
                                <p class="leading-relaxed mb-4">
                                    (ì£¼)ì—°í•©ì •ë³´í†µì‹ <br>
                                    SKí…”ë ˆì½¤ ê³µì‹ì¸ì¦ëŒ€ë¦¬ì <br>
                                    ìµœê³ ì˜ ì„œë¹„ìŠ¤ë¡œ ëª¨ì‹œê² ìŠµë‹ˆë‹¤.
                                </p>
                                <!-- Social Links replaced with Naver Blog -->
                                <div class="flex gap-3">
                                    <a href="https://blog.naver.com/skt1996s" target="_blank" class="inline-flex items-center gap-2 bg-[#03C75A] text-white px-4 py-2 rounded-lg hover:bg-[#02b351] transition shadow-lg shadow-green-900/20">
                                        <span class="font-black font-sans">N</span>
                                        <span class="font-bold text-xs">ê³µì‹ ë¸”ë¡œê·¸ ë°”ë¡œê°€ê¸°</span>
                                    </a>
                                </div>
                            </div>
                            
                            <div>
                                <h4 class="text-white font-bold mb-4">ê³ ê°ì„¼í„°</h4>
                                <p class="text-2xl font-bold text-white mb-2">${store.settings.contactPhone}</p>
                                <p class="text-xs mb-4 leading-relaxed">
                                    í‰ì¼ 10:00 - 20:00<br>
                                    (ì ì‹¬ì‹œê°„ 12:00 - 13:00)<br>
                                    ì£¼ë§/ê³µíœ´ì¼ 11:00 - 19:00
                                </p>
                                <div class="flex gap-3 text-xs">
                                    <a href="javascript:void(0)" onclick="toggleModal('terms')" class="text-white font-bold hover:underline">ì´ìš©ì•½ê´€</a>
                                    <span class="text-gray-700">|</span>
                                    <a href="javascript:void(0)" onclick="toggleModal('privacy')" class="text-white font-bold hover:underline">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                                </div>
                            </div>

                            <div>
                                <h4 class="text-white font-bold mb-4">íšŒì‚¬ ì •ë³´</h4>
                                <ul class="space-y-2 text-xs">
                                    <li>ìƒí˜¸ëª…: (ì£¼)ì—°í•©ì •ë³´í†µì‹ </li>
                                    <li>ëŒ€í‘œì´ì‚¬: ì†¡ê¸°íƒ</li>
                                    <li>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 122-81-53413</li>
                                    <li>í†µì‹ íŒë§¤ì—… ì‹ ê³ : 2006-00436</li>
                                    <li>ì£¼ì†Œ: ì¸ì²œ ë¶€í‰êµ¬ ë¶€í‰ëŒ€ë¡œ 301, ë‚¨ê´‘ì„¼íŠ¸ë ‰ìŠ¤ 509í˜¸ (ë³¸ì‚¬)</li>
                                    <li class="pt-2 mt-2 border-t border-gray-800 text-gray-500">ê°œì¸ì •ë³´ê´€ë¦¬ì±…ì„ì: ì—°í•©ê³ ê°ì •ë³´íŒ€<br>(skt1951@nate.com)</li>
                                </ul>
                            </div>

                            <div>
                                <h4 class="text-white font-bold mb-4">ì œíœ´ ë° ë¬¸ì˜</h4>
                                <p class="text-2xl font-bold text-white mb-4">${store.settings.inquiryPhone}</p>
                                <p class="text-xs mb-4">ëŒ€ëŸ‰ êµ¬ë§¤ ë° ë²•ì¸ ê°œí†µ ìƒë‹´ í™˜ì˜í•©ë‹ˆë‹¤.</p>
                                <div class="flex gap-2">
                                    <div class="bg-gray-800 p-2 rounded text-center min-w-[60px]">
                                        <i data-lucide="shield-check" class="w-6 h-6 mx-auto mb-1 text-primary"></i>
                                        <span class="text-[10px] block">ì•ˆì „ê²°ì œ</span>
                                    </div>
                                    <div class="bg-gray-800 p-2 rounded text-center min-w-[60px]">
                                        <i data-lucide="truck" class="w-6 h-6 mx-auto mb-1 text-primary"></i>
                                        <span class="text-[10px] block">ë¹ ë¥¸ë°°ì†¡</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                            <p class="text-xs">Copyright Â© 2026 Yeonhap Information Communication Co., Ltd. All rights reserved.</p>
                            <a href="javascript:void(0)" onclick="toggleAdmin()" class="text-gray-700 hover:text-gray-500 text-xs">Admin</a>
                        </div>
                    </div>
                </footer>
            `;
        }

        // Admin Dashboard
        function AdminDashboard() {
            if (!state.isAdmin) return '';
            
            return `
                <div class="fixed inset-0 bg-gray-100 z-[100] overflow-y-auto">
                    <div class="bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center sticky top-0 z-10">
                        <h2 class="text-xl font-bold flex items-center gap-2"><i data-lucide="settings" class="text-primary"></i> ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>
                        <div class="flex gap-2">
                            <button onclick="saveStore()" class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-primaryDark">ì €ì¥í•˜ê¸°</button>
                            <button onclick="toggleAdmin()" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm hover:bg-gray-300">ë‚˜ê°€ê¸°</button>
                        </div>
                    </div>
                    
                    <div class="container mx-auto p-6 max-w-4xl space-y-8 pb-20">
                        <!-- Settings -->
                        <div class="bg-white rounded-xl p-6 shadow-sm">
                            <h3 class="font-bold text-lg mb-4">ì‚¬ì´íŠ¸ ê¸°ë³¸ ì„¤ì •</h3>
                            <div class="space-y-4">
                                <!-- Admin Password Setting (New) -->
                                <div class="bg-yellow-50 p-3 rounded border border-yellow-200 mb-4">
                                    <label class="block text-sm font-bold mb-1 text-yellow-800 flex items-center gap-1">
                                        <i data-lucide="lock" class="w-4 h-4"></i> ê´€ë¦¬ì ì ‘ì† ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
                                    </label>
                                    <input type="text" class="w-full border border-yellow-300 rounded p-2 text-sm font-bold text-gray-800 bg-white" value="${store.settings.adminPassword || '1234'}" onchange="updateSetting('adminPassword', this.value)">
                                    <p class="text-xs text-yellow-600 mt-1">* ì´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠì–´ë²„ë¦¬ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.</p>
                                </div>

                                <div>
                                    <label class="block text-sm font-bold mb-1">ë©”ì¸ íƒ€ì´í‹€</label>
                                    <textarea id="admin-hero-title" class="w-full border rounded p-2 text-sm" rows="2" onchange="updateSetting('heroTitle', this.value)">${store.settings.heroTitle}</textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-1">ì„œë¸Œ íƒ€ì´í‹€</label>
                                    <textarea id="admin-hero-subtitle" class="w-full border rounded p-2 text-sm" rows="2" onchange="updateSetting('heroSubtitle', this.value)">${store.settings.heroSubtitle}</textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold mb-1">ë©”ì¸ ì´ë¯¸ì§€ URL (Premium Store)</label>
                                    <input type="text" class="w-full border rounded p-2 text-sm text-gray-600 bg-gray-50" value="${store.settings.heroImage || ''}" onchange="updateSetting('heroImage', this.value)" placeholder="https://...">
                                    <p class="text-xs text-gray-400 mt-1">* ì´ë¯¸ì§€ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-bold mb-1">ê³ ê°ì„¼í„° ë²ˆí˜¸ (ë…¸ì¶œìš©)</label>
                                        <input type="text" class="w-full border rounded p-2 text-sm" value="${store.settings.contactPhone}" onchange="updateSetting('contactPhone', this.value)">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-bold mb-1">ì œíœ´ë¬¸ì˜ ë²ˆí˜¸ (ë…¸ì¶œìš©)</label>
                                        <input type="text" class="w-full border rounded p-2 text-sm" value="${store.settings.inquiryPhone}" onchange="updateSetting('inquiryPhone', this.value)">
                                    </div>
                                    <!-- SMS Receiver Number Input -->
                                    <div class="col-span-2 bg-red-50 p-3 rounded border border-red-100">
                                        <label class="block text-sm font-bold mb-1 text-red-800 flex items-center gap-1">
                                            <i data-lucide="message-square" class="w-4 h-4"></i> ìƒë‹´/ê°€ì… ì‹ ì²­ ìˆ˜ì‹  ë²ˆí˜¸ (ê´€ë¦¬ì ë¬¸ì)
                                        </label>
                                        <input type="text" class="w-full border border-red-200 rounded p-2 text-sm font-bold text-gray-800" value="${store.settings.adminMobile || ''}" onchange="updateSetting('adminMobile', this.value)" placeholder="010-0000-0000">
                                        <p class="text-xs text-red-500 mt-1">* ì‹¤ì œ ë¬¸ìë¥¼ ë°›ì„ íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì‚¬ì¥ë‹˜ í°ë²ˆí˜¸)</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Product Management -->
                        <div class="bg-white rounded-xl p-6 shadow-sm">
                            <h3 class="font-bold text-lg mb-4">ìƒí’ˆ ê´€ë¦¬ (ê°€ê²©/ì •ë³´)</h3>
                            <div class="space-y-4">
                                ${store.products.map(p => `
                                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-100 flex flex-col md:flex-row gap-4 items-start">
                                        <div class="flex-shrink-0">
                                            <img src="${p.img}" class="w-20 h-20 rounded-lg object-cover border border-gray-200">
                                            <div class="text-[10px] text-center text-gray-500 mt-1">${p.type === 'new' ? 'ìƒˆìƒí’ˆ' : 'ì¤‘ê³ í°'}</div>
                                        </div>
                                        <div class="flex-1 grid grid-cols-1 md:grid-cols-2 gap-3 w-full">
                                            <div class="col-span-1 md:col-span-2">
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">ìƒí’ˆëª…</label>
                                                <input type="text" class="w-full border rounded p-1.5 text-sm" value="${p.name}" onchange="updateProduct(${p.id}, 'name', this.value)">
                                            </div>
                                            <div class="col-span-1 md:col-span-2">
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">ì´ë¯¸ì§€ URL</label>
                                                <input type="text" class="w-full border rounded p-1.5 text-xs text-gray-600 bg-white" value="${p.img}" onchange="updateProduct(${p.id}, 'img', this.value)">
                                            </div>
                                            <div>
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">ê°€ê²© (ì›)</label>
                                                <input type="number" class="w-full border rounded p-1.5 text-sm" value="${p.price}" onchange="updateProduct(${p.id}, 'price', this.value)">
                                            </div>
                                            <div>
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">í• ì¸ìœ¨ (%)</label>
                                                <input type="number" class="w-full border rounded p-1.5 text-sm" value="${p.sale}" onchange="updateProduct(${p.id}, 'sale', this.value)">
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <!-- Plan Management -->
                        <div class="bg-white rounded-xl p-6 shadow-sm">
                            <h3 class="font-bold text-lg mb-4">ìš”ê¸ˆì œ ê´€ë¦¬</h3>
                            <div class="space-y-4">
                                ${store.plans.map(plan => `
                                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-100">
                                        <div class="flex justify-between mb-2">
                                            <span class="text-xs font-bold text-gray-500 bg-white px-2 py-0.5 rounded border">${plan.carrier}</span>
                                            ${plan.highlight ? '<span class="text-[10px] bg-red-100 text-red-600 px-2 py-0.5 rounded font-bold">ì¶”ì²œ ìš”ê¸ˆì œ</span>' : ''}
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                            <div>
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">ìš”ê¸ˆì œëª…</label>
                                                <input type="text" class="w-full border rounded p-1.5 text-sm font-medium" value="${plan.title}" onchange="updatePlan(${plan.id}, 'title', this.value)">
                                            </div>
                                            <div>
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">ì›” ìš”ê¸ˆ (ì›)</label>
                                                <input type="number" class="w-full border rounded p-1.5 text-sm font-bold text-primary" value="${plan.price}" onchange="updatePlan(${plan.id}, 'price', this.value)">
                                            </div>
                                            <div>
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">ë°ì´í„° ì œê³µëŸ‰</label>
                                                <input type="text" class="w-full border rounded p-1.5 text-sm" value="${plan.data}" onchange="updatePlan(${plan.id}, 'data', this.value)">
                                            </div>
                                            <div>
                                                <label class="text-[10px] block text-gray-500 font-bold mb-0.5">ìŒì„±/ë¬¸ì</label>
                                                <input type="text" class="w-full border rounded p-1.5 text-sm" value="${plan.call}" onchange="updatePlan(${plan.id}, 'call', this.value)">
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="text-center pt-8 border-t">
                            <button onclick="resetStore()" class="text-red-500 text-xs underline">ë°ì´í„° ì´ˆê¸°í™” (Factory Reset)</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Modals Component
        function Modals() {
            // Cart Drawer
            const cartDrawer = `
                <div class="fixed inset-0 z-[60] ${state.cartOpen ? '' : 'pointer-events-none'}">
                    <div class="absolute inset-0 bg-black/50 transition-opacity duration-300 ${state.cartOpen ? 'opacity-100' : 'opacity-0'}" onclick="toggleCart()"></div>
                    <div class="absolute right-0 top-0 h-full w-full max-w-sm bg-white shadow-2xl transform transition-transform duration-300 flex flex-col ${state.cartOpen ? 'translate-x-0' : 'translate-x-full'}">
                        <div class="p-4 border-b flex justify-between items-center bg-gray-50">
                            <h2 class="font-bold flex items-center gap-2"><i data-lucide="shopping-cart" class="w-5 h-5 text-primary"></i> ìƒë‹´ ë°”êµ¬ë‹ˆ</h2>
                            <button onclick="toggleCart()"><i data-lucide="x" class="w-6 h-6"></i></button>
                        </div>
                        <div class="flex-1 overflow-y-auto p-4 space-y-4">
                            ${state.cart.length === 0 
                                ? '<div class="text-center py-20 text-gray-400 flex flex-col items-center"><i data-lucide="shopping-bag" class="w-12 h-12 mb-2 opacity-50"></i><p>ë‹´ê¸´ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p></div>' 
                                : state.cart.map((item, idx) => `
                                    <div class="flex gap-3 bg-white p-3 rounded-lg border border-gray-100 shadow-sm relative group">
                                        <img src="${item.img}" class="w-16 h-16 rounded bg-gray-100 object-cover">
                                        <div class="flex-1">
                                            <h4 class="font-bold text-sm line-clamp-1">${item.name}</h4>
                                            <p class="text-primary font-bold text-sm">${formatPrice(item.price)}</p>
                                        </div>
                                        <button onclick="removeFromCart(${idx})" class="absolute top-2 right-2 text-gray-300 hover:text-red-500"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                                    </div>
                                `).join('')}
                        </div>
                        <div class="p-4 border-t bg-gray-50">
                            <p class="text-xs text-gray-500 mb-4 text-center">ìƒí’ˆ ê²°ì œëŠ” ì „ë¬¸ ìƒë‹´ í›„ ì§„í–‰ë©ë‹ˆë‹¤.</p>
                            <button onclick="checkout()" class="w-full bg-primary text-white py-4 rounded-xl font-bold hover:bg-primaryDark transition shadow-lg shadow-red-500/20">ìƒë‹´ ì‹ ì²­í•˜ê¸°</button>
                        </div>
                    </div>
                </div>
            `;

            // Common Modal Wrapper
            const modalWrapper = (id, title, content) => `
                <div class="fixed inset-0 z-[70] flex items-center justify-center p-4 ${state.modals[id] ? '' : 'hidden'}">
                    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity" onclick="toggleModal('${id}')"></div>
                    <div class="bg-white w-full max-w-2xl rounded-2xl shadow-2xl z-10 overflow-hidden flex flex-col max-h-[85vh] animate-fade-in-up">
                        <div class="p-5 border-b flex justify-between items-center bg-gray-50">
                            <h3 class="font-bold text-lg">${title}</h3>
                            <button onclick="toggleModal('${id}')" class="text-gray-400 hover:text-black"><i data-lucide="x" class="w-5 h-5"></i></button>
                        </div>
                        <div class="p-6 overflow-y-auto leading-relaxed text-sm text-gray-600 whitespace-pre-line">
                            ${content}
                        </div>
                        <div class="p-4 border-t text-center bg-gray-50">
                            <button onclick="toggleModal('${id}')" class="bg-gray-900 text-white px-8 py-2.5 rounded-lg font-bold hover:bg-black transition text-sm">í™•ì¸</button>
                        </div>
                    </div>
                </div>
            `;

            // Terms Content
            const termsContent = `
ì œ1ì¡°(ëª©ì )
ì´ ì•½ê´€ì€ (ì£¼)ì—°í•©ì •ë³´í†µì‹  (ì´í•˜ 'íšŒì‚¬'ë¼ê³  í‘œê¸°í•©ë‹ˆë‹¤)ì´ ìš´ì˜í•˜ëŠ” TìŠ¤ë§ˆíŠ¸ìƒµ(ì´í•˜ â€œëª°â€ì´ë¼ í•œë‹¤)ì—ì„œ ì œê³µí•˜ëŠ” ì¸í„°ë„· ê´€ë ¨ ì„œë¹„ìŠ¤(ì´í•˜ â€œì„œë¹„ìŠ¤â€ë¼ í•œë‹¤)ë¥¼ ì´ìš©í•¨ì— ìˆì–´ ì‚¬ì´ë²„ ëª°ê³¼ ì´ìš©ìì˜ ê¶Œë¦¬â€¤ì˜ë¬´ ë° ì±…ì„ì‚¬í•­ì„ ê·œì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.

[ì¤‘ëµ - ìƒì„¸ ë‚´ìš©ì€ í™ˆí˜ì´ì§€ ê³µì§€ì‚¬í•­ ì°¸ì¡°]

ë¶€ ì¹™(ì‹œí–‰ì¼) ì´ ì•½ê´€ì€ 2026ë…„ 1ì›” 1ì¼ë¶€í„° ì‹œí–‰í•©ë‹ˆë‹¤.
            `;

            const privacyContent = `
(ì£¼)ì—°í•©ì •ë³´í†µì‹  ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨
(ì£¼)ì—°í•©ì •ë³´í†µì‹ ì€ (ì´í•˜ "íšŒì‚¬"ëŠ”) ã€Œê°œì¸ì •ë³´ ë³´í˜¸ë²•ã€ ì œ30ì¡°ì— ë”°ë¼ ì´ìš©ìì˜ ê°œì¸ì •ë³´ë¥¼ ë³´í˜¸í•˜ê³  ì´ì™€ ê´€ë ¨í•œ ê³ ì¶©ì„ ì‹ ì†í•˜ê³  ì›í™œí•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì„ ìˆ˜ë¦½Â·ê³µê°œí•©ë‹ˆë‹¤.

1. ê°œì¸ì •ë³´ì˜ ì²˜ë¦¬ ëª©ì 
íšŒì‚¬ëŠ” ë‹¤ìŒì˜ ëª©ì ì„ ìœ„í•˜ì—¬ ê°œì¸ì •ë³´ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤...

[ì¤‘ëµ - ìƒì„¸ ë‚´ìš©ì€ í™ˆí˜ì´ì§€ ê³µì§€ì‚¬í•­ ì°¸ì¡°]

10. ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ ë³€ê²½
ì´ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì€ 2026ë…„ 1ì›” 1ì¼ë¶€í„° ì ìš©ë©ë‹ˆë‹¤.
            `;

            // Consultation Items Logic (Plan vs Cart)
            let inquiryItemsHtml = '';
            let inquiryCount = 0;
            
            if (state.selectedPlan) {
                inquiryCount = 1;
                inquiryItemsHtml = `
                    <div class="text-sm font-medium truncate flex justify-between">
                        <span class="text-primary font-bold">[ìš”ê¸ˆì œ] ${state.selectedPlan}</span>
                    </div>
                `;
            } else {
                inquiryCount = state.cart.length;
                inquiryItemsHtml = state.cart.map(item => `
                    <div class="text-sm font-medium truncate flex justify-between">
                        <span>${item.name}</span>
                        <span class="text-primary">${formatPrice(item.price)}</span>
                    </div>
                `).join('');
            }


            return `
                ${cartDrawer}
                ${modalWrapper('terms', 'ì´ìš©ì•½ê´€', termsContent)}
                ${modalWrapper('privacy', 'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨', privacyContent)}
                
                <!-- Login Modal -->
                <div class="fixed inset-0 z-[70] flex items-center justify-center p-4 ${state.modals.login ? '' : 'hidden'}">
                    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="toggleModal('login')"></div>
                    <div class="bg-white w-full max-w-sm rounded-2xl shadow-2xl z-10 overflow-hidden p-8 relative">
                        <button onclick="toggleModal('login')" class="absolute top-4 right-4 text-gray-400 hover:text-black"><i data-lucide="x" class="w-5 h-5"></i></button>
                        <h3 class="text-2xl font-bold text-center mb-6">ë¡œê·¸ì¸</h3>
                        <form onsubmit="event.preventDefault(); showToast('ë¡œê·¸ì¸ ë˜ì—ˆìŠµë‹ˆë‹¤.'); toggleModal('login');" class="space-y-4">
                            <input type="text" placeholder="ì•„ì´ë””" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                            <input type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                            <button class="w-full bg-primary text-white font-bold py-3.5 rounded-xl hover:bg-primaryDark transition shadow-lg shadow-red-500/30">ë¡œê·¸ì¸</button>
                        </form>
                        <div class="mt-6 text-center text-xs text-gray-500">
                            ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <button onclick="toggleModal('login'); toggleModal('signup');" class="text-primary font-bold hover:underline ml-1">íšŒì›ê°€ì…</button>
                        </div>
                    </div>
                </div>

                <!-- Signup Modal (Formspree) -->
                <div class="fixed inset-0 z-[70] flex items-center justify-center p-4 ${state.modals.signup ? '' : 'hidden'}">
                    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="toggleModal('signup')"></div>
                    <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl z-10 overflow-hidden p-8 relative">
                        <button onclick="toggleModal('signup')" class="absolute top-4 right-4 text-gray-400 hover:text-black"><i data-lucide="x" class="w-5 h-5"></i></button>
                        <h3 class="text-2xl font-bold text-center mb-6">íšŒì›ê°€ì…</h3>
                        <form onsubmit="handleSignup(event)" class="space-y-3">
                            <input type="hidden" name="_subject" value="[ë°±ë§ˆì¥ëŒ€ë¦¬ì ] ì‹ ê·œ íšŒì›ê°€ì… ì‹ ì²­">
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="block text-xs font-bold text-gray-500 mb-1">ì´ë¦„</label>
                                    <input type="text" name="name" required class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                                </div>
                                <div>
                                    <label class="block text-xs font-bold text-gray-500 mb-1">ìƒë…„ì›”ì¼</label>
                                    <input type="text" name="birthday" placeholder="ì˜ˆ: 900101" class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">ì•„ì´ë””</label>
                                <div class="flex gap-2">
                                    <input type="text" name="userid" required class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                                    <button type="button" class="bg-gray-200 text-gray-600 text-xs font-bold px-3 rounded-lg hover:bg-gray-300">ì¤‘ë³µí™•ì¸</button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">ë¹„ë°€ë²ˆí˜¸</label>
                                <input type="password" name="password" required class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">íœ´ëŒ€í° ë²ˆí˜¸</label>
                                <input type="tel" name="phone" placeholder="010-0000-0000" required class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                            </div>
                            <div class="pt-2">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" required class="w-4 h-4 text-primary rounded focus:ring-primary">
                                    <span class="text-xs text-gray-500">[í•„ìˆ˜] ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë™ì˜</span>
                                </label>
                            </div>
                            <button class="w-full bg-primary text-white font-bold py-3.5 rounded-xl hover:bg-primaryDark transition shadow-lg shadow-red-500/30 mt-2">ê°€ì…í•˜ê¸°</button>
                        </form>
                        <div class="mt-4 text-center text-xs text-gray-500">
                            ì´ë¯¸ íšŒì›ì´ì‹ ê°€ìš”? <button onclick="toggleModal('signup'); toggleModal('login');" class="text-primary font-bold hover:underline ml-1">ë¡œê·¸ì¸</button>
                        </div>
                    </div>
                </div>

                <!-- Consultation Modal (Formspree) -->
                <div class="fixed inset-0 z-[70] flex items-center justify-center p-4 ${state.modals.consultation ? '' : 'hidden'}">
                    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="toggleModal('consultation')"></div>
                    <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl z-10 overflow-hidden p-6 relative">
                        <button onclick="toggleModal('consultation')" class="absolute top-4 right-4 text-gray-400 hover:text-black"><i data-lucide="x" class="w-5 h-5"></i></button>
                        <h3 class="text-xl font-bold text-center mb-1">ìƒë‹´ ì‹ ì²­</h3>
                        <p class="text-xs text-center text-gray-500 mb-6">ì „ë¬¸ ìƒë‹´ì‚¬ê°€ í™•ì¸ í›„ ë¹ ë¥´ê²Œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
                        
                        <div class="bg-gray-50 p-4 rounded-xl mb-6 border border-gray-100">
                            <h4 class="text-xs font-bold text-gray-500 mb-2">ì‹ ì²­ ìƒí’ˆ (${inquiryCount}ê±´)</h4>
                            <div class="max-h-24 overflow-y-auto space-y-1">
                                ${inquiryItemsHtml}
                            </div>
                        </div>

                        <form onsubmit="submitConsultation(event)" class="space-y-3">
                            <input type="hidden" name="_subject" value="[ë°±ë§ˆì¥ëŒ€ë¦¬ì ] ìƒë‹´ ì‹ ì²­ ì ‘ìˆ˜">
                            <input type="hidden" name="cart_items" id="consultation-cart-items">
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">ì‹ ì²­ì ì„±í•¨</label>
                                <input type="text" name="name" required class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-primary">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">ì—°ë½ì²˜</label>
                                <input type="tel" name="phone" required placeholder="010-0000-0000" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-primary">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">ë¬¸ì˜/ìš”ì²­ì‚¬í•­</label>
                                <textarea name="message" rows="3" placeholder="í†µí™” ê°€ëŠ¥ ì‹œê°„ì´ë‚˜ ê¶ê¸ˆí•œ ì ì„ ë‚¨ê²¨ì£¼ì„¸ìš”." class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-primary"></textarea>
                            </div>
                            <div class="pt-2">
                                <label class="flex items-center gap-2 cursor-pointer">
                                    <input type="checkbox" required class="w-4 h-4 text-primary rounded focus:ring-primary">
                                    <span class="text-xs text-gray-500">[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</span>
                                </label>
                            </div>
                            <button class="w-full bg-gray-900 text-white font-bold py-3 rounded-xl hover:bg-black transition mt-2">ìƒë‹´ ì‹ ì²­ ì™„ë£Œ</button>
                        </form>
                    </div>
                </div>
            `;
        }

        // Toast Component
        function Toast() {
            return `
                <div id="toast" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-900/90 backdrop-blur text-white px-6 py-3 rounded-full shadow-2xl z-[90] pointer-events-none opacity-0 transition-all duration-300 translate-y-4 flex items-center gap-3">
                    <i data-lucide="check-circle" class="w-5 h-5 text-green-400"></i>
                    <span id="toast-message" class="font-medium text-sm">ì•Œë¦¼</span>
                </div>
            `;
        }

        // --- 4. Main App Render ---
        function render() {
            const app = document.getElementById('app');
            app.innerHTML = `
                ${Header()}
                ${state.isAdmin ? AdminDashboard() : `
                    <main>
                        ${Hero()}
                        ${CategoryNav()}
                        ${ProductSection('new')}
                        ${PlansSection()}
                        ${ProductSection('used')}
                        ${TrustSection()}
                    </main>
                    ${Footer()}
                `}
                ${Modals()}
                ${Toast()}
            `;
            lucide.createIcons();
        }

        // --- 5. Actions & Controllers ---
        
        window.toggleCart = function() {
            state.cartOpen = !state.cartOpen;
            render();
        }

        window.addToCart = function(id) {
            const product = store.products.find(p => p.id === id);
            state.cart.push(product);
            showToast(`${product.name}ì´(ê°€) ë‹´ê²¼ìŠµë‹ˆë‹¤.`);
            render();
        }

        window.removeFromCart = function(index) {
            state.cart.splice(index, 1);
            render();
        }

        window.toggleModal = function(id) {
            state.modals[id] = !state.modals[id];
            render();
        }

        window.checkout = function() {
            if(state.cart.length === 0) return showToast('ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.');
            // Close cart and open consultation modal
            state.selectedPlan = null; // Clear plan selection to use cart mode
            state.cartOpen = false;
            state.modals.consultation = true;
            render();
        }

        // --- SMS Sending Logic (Replaces Formspree) ---
        function sendSMS(type, formData) {
            const adminMobile = store.settings.adminMobile.replace(/[^0-9]/g, ''); // Numbers only
            let message = '';

            if (!adminMobile || adminMobile === "01000000000") {
                alert("ê´€ë¦¬ì ì„¤ì •ì—ì„œ 'ìˆ˜ì‹  ë²ˆí˜¸'ë¥¼ ë¨¼ì € ì„¤ì •í•´ì£¼ì„¸ìš”.");
                return false;
            }

            if (type === 'consultation') {
                const cartItems = formData.get('cart_items') || 'ì„ íƒ ìƒí’ˆ ì—†ìŒ';
                message = `[SKTë°±ë§ˆì¥ ìƒë‹´ì‹ ì²­]\n` +
                          `â–¶ ì„±í•¨: ${formData.get('name')}\n` +
                          `â–¶ ì—°ë½ì²˜: ${formData.get('phone')}\n` +
                          `â–¶ ìš”ì²­ì‚¬í•­: ${formData.get('message')}\n` +
                          `â–¶ ê´€ì‹¬ìƒí’ˆ: ${cartItems}`;
            } else if (type === 'signup') {
                message = `[SKTë°±ë§ˆì¥ íšŒì›ê°€ì…]\n` +
                          `â–¶ ì´ë¦„: ${formData.get('name')}\n` +
                          `â–¶ ìƒë…„ì›”ì¼: ${formData.get('birthday')}\n` +
                          `â–¶ ì•„ì´ë””: ${formData.get('userid')}\n` +
                          `â–¶ ì—°ë½ì²˜: ${formData.get('phone')}`;
            }

            // URL Encode the message
            const encodedMessage = encodeURIComponent(message);
            
            // Detect iOS vs Android for correct SMS delimiter
            // iOS uses '&', Android uses '?' usually, but '?' works on most modern devices or is handled by browser
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            const delimiter = isIOS ? '&' : '?';
            
            const smsUrl = `sms:${adminMobile}${delimiter}body=${encodedMessage}`;
            
            // Open SMS app
            window.location.href = smsUrl;
            return true;
        }

        // Handle Signup (SMS)
        window.handleSignup = function(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);

            if(sendSMS('signup', formData)) {
                showToast('ë¬¸ì ë©”ì‹œì§€ ì•±ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. [ì „ì†¡]ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.');
                toggleModal('signup');
                form.reset();
            }
        }

        // Handle Consultation (SMS)
        window.submitConsultation = function(event) {
            event.preventDefault();
            const form = event.target;
            
            // Populate hidden cart items field based on selection mode
            let summary = '';
            if (state.selectedPlan) {
                summary = `[ìš”ê¸ˆì œ] ${state.selectedPlan}`;
            } else {
                summary = state.cart.map(item => `${item.name} (${formatPrice(item.price)})`).join(', ');
            }
            form.querySelector('input[name="cart_items"]').value = summary;

            const formData = new FormData(form);

            if(sendSMS('consultation', formData)) {
                showToast('ë¬¸ì ë©”ì‹œì§€ ì•±ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. [ì „ì†¡]ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.');
                state.cart = []; // Clear cart
                state.selectedPlan = null; // Clear plan selection
                state.modals.consultation = false;
                render();
            }
        }

        window.inquiryPlan = function(title) {
            state.selectedPlan = title; // Set the selected plan
            state.cartOpen = false; // Ensure cart is closed
            state.modals.consultation = true; // Open the consultation modal
            render();
        }

        window.showToast = function(msg) {
            const toast = document.getElementById('toast');
            const msgEl = document.getElementById('toast-message');
            msgEl.innerText = msg;
            toast.classList.remove('opacity-0', 'translate-y-4');
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-4');
            }, 3000);
        }

        // Admin Actions
        window.toggleAdmin = function() {
            if (state.isAdmin) {
                // Logout
                state.isAdmin = false;
                showToast("ê´€ë¦¬ì ëª¨ë“œê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                render();
            } else {
                // Login
                const password = prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
                // Check against stored password (default '1234' if missing)
                const currentPassword = store.settings.adminPassword || '1234';
                
                if (password === currentPassword) { 
                    state.isAdmin = true;
                    // When entering admin, close cart/modals
                    state.cartOpen = false;
                    Object.keys(state.modals).forEach(k => state.modals[k] = false);
                    showToast("ê´€ë¦¬ì ëª¨ë“œë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤.");
                    render();
                } else if (password !== null) {
                    alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                }
            }
        }

        window.updateSetting = function(key, value) {
            store.settings[key] = value;
        }

        window.updateProduct = function(id, field, value) {
            const product = store.products.find(p => p.id === id);
            if(product) {
                // If editing price or sale, convert to Number, otherwise keep as string
                if (field === 'price' || field === 'sale') {
                    product[field] = Number(value);
                } else {
                    product[field] = value;
                }
            }
        }

        window.updatePlan = function(id, field, value) {
            const plan = store.plans.find(p => p.id === id);
            if(plan) {
                if (field === 'price') {
                    plan[field] = Number(value);
                } else {
                    plan[field] = value;
                }
            }
        }

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            render();
        });

    </script>
</body>
</html>
